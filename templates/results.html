<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <title>Umfrageergebnisse</title>
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true });
    </script>
</head>

<body>
    <div class="container">
        <h1>Umfrageergebnisse</h1>
        <p>Ergebnisse f√ºr die Umfrage mit der UUID: {{ survey_uuid }}</p>
        {% if questions and weighted_answers %}
        <table>
            <thead>
                <tr>
                    <th>Frage</th>
                    <th>Antworten</th>
                </tr>
            </thead>
            <tbody>
                {% for question in questions %}
                <tr>
                    <td>{{ question.question }}</td>
                    <td>
                        <div class="mermaid">
                            ---
                            config:
                                theme: "dark"
                            ---
                            xychart-beta
                                x-axis "Wertung"
                                y-axis "Anzahl"
                                bar[{% for i in range(10) %}{{ weighted_answers[question.id][i] }}{% if not loop.last %},{% endif %}{% endfor %}]
                        </div>
                        <p>Durchschnitt: {{ average_answers[question.id] }}</p>
                        <p>Eigene Bewertung: {{ answers[question.id][user] }}</p>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <p>Keine Ergebnisse gefunden.</p>
        {% endif %}
        <p class="user">User ID: {{ user }}</p>
    </div>
</body>

</html>